{% extends "base.html" %}
{% block content %}
<header>
  <input id="cur-day" name="cur_day" type="hidden" value="{{ date }}" />
  <div class="container-fluid p-0 fixed-top my-bar">
    <div class="row p-0 m-0">

      <div class="col-7 p-0">
        <div class="row p-0 m-0">
          <div class="col-3 p-0 text-center">
            <i class="fas fa-caret-square-left fa-2x"
               onclick="moveDays('{{ url_prefix }}', -7);"></i>
          </div><!-- col -->
          <div class="col-2 p-0 text-center">
            <i class="fas fa-calendar-day fa-2x"
               onclick="scrollToDate('{{ url_prefix }}', '{{ today }}');"></i>
          </div><!-- col -->
          <div class="col-3 p-0 text-center">
            <i class="fas fa-caret-square-right fa-2x"
               onclick="moveDays('{{ url_prefix }}', +7);"></i>
          </div><!-- col -->
          <div class="col-2 text-center">
            <i class="fas fa-plus-square fa-2x"></i>
          </div><!-- col -->
          <div class="col-2 text-center">
            &nbsp;
          </div><!-- col -->
        </div><!-- row -->
        <div class="row p-0 m-0">
          <div class="col-8 p-0 text-center">
            <small><input id="date" name="date"
                          type="date" value="{{ date }}"
                          onchange="execGet('{{ url_prefix }}', {date: this.value});"/></small>
          </div><!-- col -->
          <div class="col-4 p-0 text-center">
            &nbsp;
          </div><!-- col -->
        </div><!-- row -->
      </div><!-- col -->

      <div class="col-5 text-right">
        <div class="row align-middle">
          <div class="col-3 text-right p-0">
            <i class="fas fa-filter"></i>
          </div><!-- col -->
          <div class="col-9 text-center p-0">
            <small><input type="text" size="9" /></small>
          </div><!-- col -->
        </div><!-- row -->
        <div class="row align-middle">
          <div class="col-3 text-right p-0">
            <i class="fas fa-search"></i>
          </div><!-- col -->
          <div class="col-9 text-center p-0">
            <small><input type="text" size="9" /></small>
          </div><!-- col -->
        </div><!-- row -->
      </div><!-- col -->

    </div><!-- row -->
  </div><!-- container -->
</header>
<main style="background-color:#FFF;padding-top: 60px;">
  <!-- {{ sched_ent['date'] }} -->
  {% set sde_count = 0 %}
  {% for sde in sde_list %}
  {% set sde_count = sde_count + 1 %}
  <input type="hidden" id="sde_id" name="sde_id" value="{{ sde.id }}" />
  <div class="container-fluid p-0 border"
       {% if sde_count % 2 == 0 %}
       style="background-color:#FFF;"
       {% else %}
       style="background-color:#FFF;"
       {% end %}
       {% set url = url_prefix + '/edit/' %}
       {% set data = {'date': date, 'sde_id': sde.id} %}
       onclick="execGet('{{ url }}', {{ data }}');">
    <div class="row m-0">
      <div class="col p-0">
        <span style="font-size: x-small;">
          {% if sde.time_start or sde.time_end %}
          {% if sde.time_start %}
          {{ sde.time_start.strftime('%H:%M') }}
          {% end %}
          -
          {% if sde.time_end %}
          {{ sde.time_end.strftime('%H:%M') }}
          {% end %}
          {% end %}
        </span>
        {% set important_flag = False %}
        {% if sde.title and sde.title[0] in ['★', '☆'] %}
        {% set important_flag = True %}
        <strong>
          {% end %}
          <span style="font-size: small;">
            {% if sde.type %}
            [{{ sde.type }}]
            {% end %}
            {{ sde.title }}
            {% if sde.place %}
            @{{ sde.place }}
            {% end %}
            {% if important_flag %}
          </span>
        </strong>
        {% end %}
      </div><!-- col -->
    </div><!-- row -->
    <div class="row m-0">
      <div class="col" style="font-size: x-small;">
        <pre>{{ '\n'.join(sde.text.split('\n')[0:4]) }}</pre>
      </div><!-- col -->
    </div><!-- row -->
  </div><!-- container -->
</main>
{% end %}
